**DO NOT EDIT THIS FILE UNLESS YOU ARE IN AUDIT MODE. CODERS AND TASK MASTER KEEP OUT.**

# Web Rewrite Audit

## Summary
Audit of completed backend tasks in `.codex/tasks/ac8cbde0-web-task-order.md` finds existing room endpoints, tests, Docker tooling, and plugin imports functioning as described. However, frontend documentation and layout have drifted from specifications. Opening menus enlarges the game viewport and required side panels are missing. Remaining work—encrypted saves, map generator, passives, relics, cards, gacha pulls, stat screen data, shared shop inventory, and frontend alignment—still blocks a fully playable loop. Additional issues: Start Run button returns to main menu, Start Run and Cancel buttons lack stained glass theme, map orientation is inverted, room clicks fail to contact the backend, the battle endpoint payload is undocumented, the Back button goes home, the Home and Player Editor buttons do nothing, the Settings menu lacks a voice option, the frontend never checks for ongoing battles, and item, relic, and card icons are missing. (ready for audit)

## Findings
### Replace legacy player plugin imports (`f1245ae6`) – PASSED
- Player plugins now import `CharacterType` from the new module, and plugin loader tests confirm discovery【F:backend/plugins/players/becca.py†L1-L6】【F:backend/tests/test_player_plugins.py†L1-L12】

### Implement room endpoints with game logic (`541be07f`) – PASSED
- Battle and shop endpoints exchange attacks and deduct shared gold; room images endpoint serves backgrounds, and tests cover the routes【F:backend/app.py†L182-L229】【F:.codex/implementation/room-endpoints.md†L12-L23】

### Remove remaining Panda3D references (`735b854e`) – PASSED
- Event bus stands in for Panda3D's messenger and docs affirm the project no longer targets 3D rendering【F:backend/plugins/event_bus.py†L13-L41】【F:README.md†L105-L109】【F:.codex/planning/8a7d9c1e-web-game-plan.md†L1-L8】

### Expose battle, shop, and rest endpoints (`b0755eeb`) – PASSED
- Dedicated routes reuse existing game logic and persist run state in `save.db`【F:backend/app.py†L182-L246】【F:.codex/implementation/room-endpoints.md†L12-L23】

### Frontend UI and documentation – FAILED
- Desktop layout, settings menu, and viewport behavior do not match planned design【F:feedback.md†L18-L24】【F:.codex/planning/8a7d9c1e-web-game-plan.md†L9-L17】

### Scaffold Quart backend (`1faf53ba`) – PASSED
- Quart app boots on port `59002`, root endpoint returns status, and setup steps live in the README【F:backend/app.py†L70-L106】【F:backend/README.md†L1-L24】

### Add backend tests for run and rooms (`5cc4df14`) – PASSED
- Test suite spins up an encrypted database, starts runs, and exercises room endpoints【F:backend/tests/test_app.py†L1-L60】

### Fix backend Dockerfile (`34f8a5b0`) – PASSED
- Dockerfile installs Docker and Compose in separate steps and respects the `UV_EXTRA` argument via the entrypoint【F:Dockerfile.python†L14-L24】【F:backend/docker-entrypoint.sh†L7-L9】

### Add Docker Compose profiles for LLM extras (`e09f282f`) – PASSED
- `compose.yaml` defines `llm-cuda`, `llm-amd`, and `llm-cpu` profiles, and the README documents usage【F:compose.yaml†L21-L53】【F:README.md†L67-L76】

## Status
ISSUES FOUND (ready for audit)

Coders: completed tasks withstand scrutiny, but the backlog is long. Encrypted saves, procedural maps, passives, relics, cards, gacha recruitment, stat screens, and shared shop inventory remain undone. Expect the next audit to pry even deeper—sloppiness will not be tolerated.
